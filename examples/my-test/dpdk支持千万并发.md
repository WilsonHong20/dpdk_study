# dpdk如何支持千万级别并发


# c10m的极限瓶颈在哪里
  c10k  c1000K c10m
    1M*1024*1024
    千万并发
 
    并发：同时承载的客户端数据


# c10k 
select(maxfd,rfds,wfds,efs,timeout)  
    1024                                      userspace  <====>   kernelspace    互相copy，影响性能。
     1K. 多个线程多个进程

# c1000k
epoll  所有文件集合      网络IO能达到100W级别
        就绪集合


# c10M
 网络IO并发量的限制，为什么不能做到10M
1.  CPU

2. 内存

3. 磁盘、文件系统 fd = open

4. 网卡

5. 操作系统 


# 1. 系统调用的终端 2. 数据的copy 3. 对于多对列网卡

# 用户态协议栈
    
    send/recv
    
    网卡数据映射到内存

    cpu多队列的亲源性


dpdk --> bsd4.4/lwip





王鹤的阻断告警上报功能造成主线程卡顿。因为调用了write


# 实现C10M以为着什么？

1. 实现10M（即1千万）的并发连接挑战意味着什么：

2. 100万个连接每秒：每个连接以这个速率持续约10S

3. 10GB/秒的连接：快速连接到互联网

4. 1千万个数据包/秒：据估计目前的服务器每秒处理50K数据包，以后会更多

5. 10微妙的延迟：可扩展服务器也许可以处理这个规模（但延迟可能会飙升）

6. 10微妙的抖动：限制最大延迟

7. 并发10核技术：软件应支持更多核的服务器（通常情况下，软件能轻松扩展到四核，服务器可以扩展到更多的核，因此需要重写软件，以支持更多核的服务器）

  







